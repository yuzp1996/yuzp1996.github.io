## 如何在django中使用密码加密

#### 在项目后期，我们开始对安全问题进行了排查以及修复，其中的一点就是关于用户注册登录时密码安全问题，在这里我学习总结整理下，前人栽树后人乘凉，祝前人无论考研还是工作都能过得开心满足，生活美滋滋


先来了解一下加密算法有哪些[加密方式](http://www.cnblogs.com/MikeChen/archive/2011/04/22/2024574.html)

常见的加密算法可以分成三类，对称加密算法，非对称加密算法和Hash算法。

**对称加密**
指 *加密和解密使用相同密钥的加密算法*。对称加密算法的优点在于加解密的高速度和使用长密钥时的难破解性。假设两个用户需要使用对称加密方法加密然后交换数据，则用户最少需要2个密钥并交换使用，如果企业内用户有n个，则整个企业共需要n×(n-1) 个密钥，密钥的生成和分发将成为企业信息部门的恶梦。对称加密算法的安全性取决于加密密钥的保存情况，但要求企业中每一个持有密钥的人都保守秘密是不可能的，他们通常会有意无意的把密钥泄漏出去——如果一个用户使用的密钥被入侵者所获得，入侵者便可以读取该用户密钥加密的所有文档，如果整个企业共用一个加密密钥，那整个企业文档的保密性便无从谈起。

常见的对称加密算法有DES、3DES、Blowfish、IDEA、RC4、RC5、RC6和AES

**非对称加密**
指 *加密和解密使用不同密钥的加密算法*，也称为公私钥加密。假设两个用户要加密交换数据，双方交换公钥，使用时一方用对方的公钥加密，另一方即可用自己的私钥解密。如果企业中有n个用户，企业需要生成n对密钥，并分发n个公钥。由于公钥是可以公开的，用户只要保管好自己的私钥即可，因此加密密钥的分发将变得十分简单。同时，由于每个用户的私钥是唯一的，其他用户除了可以可以通过信息发送者的公钥来验证信息的来源是否真实，还可以确保发送者无法否认曾发送过该信息。非对称加密的缺点是加解密速度要远远慢于对称加密，在某些极端情况下，甚至能比非对称加密慢上1000倍。

常见的非对称加密算法有：RSA、ECC（移动设备用）、Diffie-Hellman、El Gamal、DSA（数字签名用）

**Hash算法**
Hash算法特别的地方在于它是*一种单向算法*，用户可以通过Hash算法对目标信息生成一段特定长度的唯一的Hash值，却不能通过这个Hash值重新获得目标信息。因此Hash算法常用在不可还原的密码存储、信息完整性校验等。
常见的Hash算法有MD2、MD4、MD5、HAVAL、SHA
加密算法的效能通常可以按照算法本身的复杂程度、密钥长度（密钥越长越安全）、加解密速度等来衡量。上述的算法中，除了DES密钥长度不够、MD2速度较慢已逐渐被淘汰外，其他算法仍在目前的加密系统产品中使用。



hashlib是个专门提供hash算法的库，现在里面包括md5, sha1, sha224, sha256, sha384, sha512，使用非常简单、方便。 md5经常用来做用户密码的存储。而sha1则经常用作数字签名。

这里使用的是hash算法，具体做法是，注册与登录的时候都进行hash加密，这个时候来进行加密后密码的比较

### 用户注册

用户注册的时候首先在js中加密一次，


    使用一个js库  < script src="/webStatic/public/sha256.min.js"> < /script>
    passWordVal = hex_sha256(passWordVal)  //密码加密

再在后台中加密一次，

    import hashlib
    passWord = hashlib.sha256(passWord).hexdigest()  # 密码加密



最终存入数据库中的密码是加密两次之后的加密密码，在数据库中是看不到具体的密码的。


### 用户登录


当用户登录时，再将密码进行两次加密，加密后与数据库中的密码进行对比，

前台进行加密一次 

    passWordVal = hex_sha256(passWordVal)  //密码加密

后台进行一次加密 

    
    password = hashlib.sha256(password).hexdigest()


****
 
### 小知识

  在makedown中写< script>中，会出现隐藏的情况，应该是尖括号成为一个什么转义符了，这个时候应该就是要在左边的尖括号留一个空格，这个时候就能显现出来了，
